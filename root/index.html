<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facial Expression Recognition - Home</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation Bar -->
    <header class="header">
        <div class="container">
            <nav class="navbar">
                <div class="logo">
                    <h1>FaceRec</h1>
                </div>
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="features.html">Features</a></li>
                    <li><a href="practice.html">Practice</a></li>
                    <li><a href="resume.html">Resume Builder</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="container">
            <h1>Facial Expression Recognition for Interviews</h1>
            <p>Analyze candidate confidence and eye contact during video interviews to make data-driven decisions.</p>
        </div>
    </section>

    <!-- Main Content Section -->
    <section class="main-content">
        <div class="container">
            <div class="content-grid">
                <!-- Key Features Section -->
                <div class="features">
                    <h2>Key Features</h2>
                    <div class="features-grid">
                        <div class="feature-item">
                            <h3>Real-Time Emotion Detection</h3>
                            <p>Analyze facial expressions during interviews to detect emotions like confidence, nervousness, and attention.</p>
                        </div>
                        <div class="feature-item">
                            <h3>Eye Contact Monitoring</h3>
                            <p>Track eye movements to measure how much attention a candidate is giving to the interviewer.</p>
                        </div>
                        <div class="feature-item">
                            <h3>Graphical Data Reports</h3>
                            <p>Provide clear visual graphs showing confidence levels and engagement over the course of the interview.</p>
                        </div>
                    </div>
                    <a href="features.html" class="btn-primary">Learn More</a>
                </div>

                <!-- Video Section -->
                    <h2 class="video-title">Demo Interview</h2>
                    <div class="video-box">
                        <video id="video" width="640" height="360" autoplay muted></video>
                    </div>
                    <div class="question-box">
                        <h2>Interview Question</h2>
                        <div id="questionDisplay" class="question-display">Click "Get Random Question" to start!</div>
                        <button onclick="generateQuestion()" class="btn-secondary mt-3">Get Random Question</button>
                    </div>
                    <div class="button-container">
                        <button onclick="startVideo()" class="btn-secondary">Start Interview</button>
                        <button onclick="stopVideo()" class="btn-secondary">Stop Interview</button>
                    </div>
                </div>

        </div>
    </section>
    <script>
            // Get the video element from the DOM
    const video = document.getElementById('video');

    // Function to start webcam video stream
    function startVideo() {
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(stream => {
                video.srcObject = stream;  // Display the webcam stream in the video element
                video.play();               // Ensure video is playing
            })
            .catch(err => {
                console.error("Error accessing the webcam: ", err);
                alert("Unable to access the webcam. Please ensure it's enabled.");
            });
    }

    // Function to stop the webcam video stream
    function stopVideo() {
        const stream = video.srcObject;
        if (stream) {
            const tracks = stream.getTracks();
            tracks.forEach(track => track.stop());
            video.srcObject = null;  // Clear the video element
        }
    }

    let askedQuestions = []; // Array to store already asked questions
            // Function to generate a random question
    function generateQuestion() {
        fetch('InterviewQuestions.txt') // Replace with the path to your questions file
            .then(response => response.text())
            .then(data => {
                const questions = data.split('\n'); // Split questions by new line
                let randomQuestion;
                let unaskedQuestions = questions.filter(q => !askedQuestions.includes(q)); // Filter out already asked questions

                if (unaskedQuestions.length === 0) {
                    document.getElementById('questionDisplay').innerText = "No more new questions!";
                    return;
                }

                // Pick a random question from the unasked questions
                randomQuestion = unaskedQuestions[Math.floor(Math.random() * unaskedQuestions.length)];

                // Display the random question
                document.getElementById('questionDisplay').innerText = randomQuestion;

                // Add the question to the askedQuestions array
                askedQuestions.push(randomQuestion);
            })
            .catch(err => console.error("Error fetching questions: ", err));
    }

    </script>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 FaceRec. All rights reserved.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="script.js"></script>
</body>
</html>
